<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chat v·ªõi Doraemon - H·ªçc To√°n C√πng Doraemon</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;700;800;900&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="/static/css/style.css"> 
    
    <style>
        /* --- C·∫§U H√åNH M√ÄU S·∫ÆC DORAEMON --- */
        :root {
            --dora-blue: #0096e2;       /* Xanh da tr·ªùi */
            --dora-white: #ffffff;      /* Tr·∫Øng */
            --dora-red: #d90000;        /* ƒê·ªè (M≈©i/ƒêu√¥i) */
            --dora-yellow: #f1c40f;     /* V√†ng (Chu√¥ng) */
            --bg-color: #e0f7fa;        /* N·ªÅn trang nh·∫°t */
            --user-bubble: #fff3cd;     /* M√†u tin nh·∫Øn User (V√†ng nh·∫°t) */
            --bot-bubble: #ffffff;      /* M√†u tin nh·∫Øn Bot (Tr·∫Øng) */
            --shadow-soft: 0 10px 25px rgba(0, 150, 226, 0.15);
        }

        body {
            font-family: 'Nunito', sans-serif;
            background-color: var(--bg-color);
            /* H·ªça ti·∫øt n·ªÅn ch·∫•m bi d·ªÖ th∆∞∆°ng */
            background-image: radial-gradient(#b2ebf2 20%, transparent 20%),
                              radial-gradient(#b2ebf2 20%, transparent 20%);
            background-position: 0 0, 10px 10px;
            background-size: 20px 20px;
            margin: 0;
            padding-bottom: 20px;
        }

        /* --- CONTAINER CH√çNH --- */
        .chat-wrapper {
            max-width: 600px;
            margin: 30px auto;
            padding: 0 15px;
        }

        .chat-container {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 30px;
            box-shadow: var(--shadow-soft);
            border: 4px solid #fff;
            overflow: hidden; /* ƒê·ªÉ bo g√≥c ho·∫°t ƒë·ªông */
            display: flex;
            flex-direction: column;
            height: 80vh; /* Chi·ªÅu cao c·ªë ƒë·ªãnh ƒë·ªÉ scroll */
            position: relative;
        }

        /* --- HEADER --- */
        .chat-header {
            background: var(--dora-blue);
            color: white;
            padding: 15px 20px;
            text-align: center;
            border-bottom: 5px solid #007bb5;
            position: relative;
            z-index: 10;
        }

        .chat-header h2 {
            margin: 0;
            font-weight: 900;
            font-size: 1.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            text-shadow: 2px 2px 0px rgba(0,0,0,0.1);
        }

        /* Th√™m c√°i chu√¥ng trang tr√≠ */
        .header-bell {
            font-size: 1.8rem;
            animation: ring 3s infinite ease-in-out;
        }

        @keyframes ring {
            0%, 100% { transform: rotate(0deg); }
            10%, 30% { transform: rotate(15deg); }
            20%, 40% { transform: rotate(-15deg); }
            50% { transform: rotate(0deg); }
        }

        /* --- KHUNG CHAT --- */
        .chat-messages {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            background-color: #f0faff;
            scroll-behavior: smooth;
        }

        /* T√πy ch·ªânh thanh cu·ªôn cho cute */
        .chat-messages::-webkit-scrollbar {
            width: 8px;
        }
        .chat-messages::-webkit-scrollbar-track {
            background: #f1f1f1; 
        }
        .chat-messages::-webkit-scrollbar-thumb {
            background: #81d4fa; 
            border-radius: 10px;
        }

        /* --- TIN NH·∫ÆN --- */
        .message {
            display: flex;
            align-items: flex-end;
            margin-bottom: 20px;
            animation: popIn 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        @keyframes popIn {
            from { opacity: 0; transform: translateY(20px) scale(0.9); }
            to { opacity: 1; transform: translateY(0) scale(1); }
        }

        .avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            border: 3px solid white;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            object-fit: cover;
            background: white;
        }

        .text {
            padding: 12px 18px;
            border-radius: 20px;
            font-size: 1rem;
            line-height: 1.5;
            position: relative;
            max-width: 75%;
            word-wrap: break-word;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }

        /* Style cho BOT (Doraemon) */
        .message.bot {
            flex-direction: row;
        }
        .message.bot .avatar {
            margin-right: 10px;
        }
        .message.bot .text {
            background-color: var(--bot-bubble);
            color: #333;
            border-top-left-radius: 4px; /* T·∫°o ƒëu√¥i h·ªôi tho·∫°i */
            border: 2px solid #e1f5fe;
        }

        /* Style cho USER (B√©) */
        .message.user {
            flex-direction: row-reverse;
        }
        .message.user .avatar {
            margin-left: 10px;
        }
        .message.user .text {
            background-color: var(--user-bubble); /* M√†u v√†ng nh·∫°t */
            color: #5d4037;
            border-top-right-radius: 4px; /* T·∫°o ƒëu√¥i h·ªôi tho·∫°i */
            border: 2px solid #ffe082;
        }

        /* --- INPUT AREA --- */
        .chat-input {
            padding: 15px;
            background: white;
            display: flex;
            gap: 10px;
            border-top: 2px solid #f0f0f0;
            align-items: center;
        }

        .chat-input input {
            flex: 1;
            padding: 15px 20px;
            border-radius: 50px;
            border: 2px solid #e0e0e0;
            font-family: 'Nunito', sans-serif;
            font-size: 1rem;
            transition: all 0.3s;
            outline: none;
        }

        .chat-input input:focus {
            border-color: var(--dora-blue);
            box-shadow: 0 0 0 3px rgba(0, 150, 226, 0.2);
        }

        .chat-input button {
            background-color: var(--dora-red); /* N√∫t m√†u ƒë·ªè gi·ªëng c√°i m≈©i ho·∫∑c ƒëu√¥i */
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 50px;
            font-weight: 800;
            font-family: 'Nunito', sans-serif;
            font-size: 1rem;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            box-shadow: 0 4px 0 #990000; /* Hi·ªáu ·ª©ng n√∫t n·ªïi 3D */
        }

        .chat-input button:hover {
            transform: translateY(-2px);
            background-color: #ff1a1a;
        }

        .chat-input button:active {
            transform: translateY(2px);
            box-shadow: 0 0 0 #990000;
        }

        /* Footer */
        footer {
            text-align: center;
            padding: 20px;
            color: #666;
            font-size: 0.9rem;
        }

        /* Mobile Responsive */
        @media (max-width: 480px) {
            .chat-container {
                height: 85vh;
                border-radius: 20px;
            }
            .text {
                font-size: 0.95rem;
                padding: 10px 14px;
            }
            .avatar {
                width: 40px;
                height: 40px;
            }
        }
    </style>
</head>
<body>
    {% include '_header_2.html' %}

    <main class="chat-wrapper">
        <div class="chat-container">
            <div class="chat-header">
                <h2>
                    <span class="header-bell">üîî</span> 
                    H·ªèi To√°n Doraemon
                    <span class="header-bell" style="animation-delay: 1s;">üîî</span>
                </h2>
            </div>
            
            <div class="chat-messages" id="chat-messages">
                <div class="message bot">
                    <img src="/static/img/doraemon_avatar.png" onerror="this.src='https://cdn-icons-png.flaticon.com/512/616/616408.png'" alt="Doraemon" class="avatar">
                    <div class="text">
                        Ch√†o c·∫≠u! T·ªõ l√† Doraemon ƒë√¢y ü§ñ<br>
                        C·∫≠u g·∫∑p b√†i to√°n kh√≥ n√†o √†? ƒê∆∞a ƒë√¢y t·ªõ gi·∫£i quy·∫øt cho! üç∞
                    </div>
                </div>
                
                </div>
            
            <div class="chat-input">
                <input type="text" id="user-input" placeholder="Nh·∫≠p ph√©p t√≠nh (VD: 5 + 3)...">
                <button id="send-button">G·ª≠i üöÄ</button>
            </div>
        </div>
    </main>

    <footer>
        <div class="container">
            <p>&copy; 2025 H·ªçc To√°n C√πng Doraemon. All rights reserved.</p>
        </div>
    </footer>

    <script src="/static/js/chat_script.js"></script> 
    
    <script>
        // T·ª± ƒë·ªông cu·ªôn xu·ªëng cu·ªëi khi v√†o trang
        const chatMessages = document.getElementById('chat-messages');
        chatMessages.scrollTop = chatMessages.scrollHeight;

        // Hi·ªáu ·ª©ng focus input
        const inputField = document.getElementById('user-input');
        inputField.addEventListener('focus', () => {
            document.querySelector('.chat-input').style.borderColor = '#0096e2';
        });
        inputField.addEventListener('blur', () => {
            document.querySelector('.chat-input').style.borderColor = '#f0f0f0';
        });
    </script>
</body>
</html>